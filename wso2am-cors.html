<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 6.6 (453323)"/><meta name="altitude" content="70.80183410644531"/><meta name="author" content="Jinshan Li"/><meta name="created" content="2016-04-17 02:34:31 +0000"/><meta name="latitude" content="41.77594058175383"/><meta name="longitude" content="123.4267726407853"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2016-04-17 05:17:06 +0000"/><title>WSO2 API Manager 中CORS跨域设置（含token获取跨域）</title></head><body>
<div><span style="font-size: 12px;">WSO2 API Manager中password授权模式的token获取方式如：</span></div>
<div><span style="font-size: 12px;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: Menlo; font-variant-ligatures: no-common-ligatures;">curl -k -d "grant_type=password&amp;username=admin&amp;password=admin" -H "Authorization: Basic M0lPTHJtcFBlMmR3MGRUcXdkTWJVSjNvQ2VBYTpqdVUzSzZiSHVhQUtIakZ3aDUyZ09QRHJmemNh" -H "Content-Type: application/x-www-form-urlencoded" <a href="https://localhost:9444/token">https://localhost:9443/token</a></span></span></div>
<div><span style="font-size: 12px;"><span style="font-family: Menlo;"><br/></span></span></div>
<div><span style="font-size: 12px;"><span style="font-family: Menlo;">如果需要在angular、ember中单页应用（SPA）发起token获取请求会涉及跨域访问问题，为了解决CORS跨域访问问题，需要对WSO2 API Manager做以下配置：</span></span></div>
<div><span style="font-size: 12px;"><span style="font-family: Menlo;"><br/></span></span></div>
<div><span style="font-size: 12px;"><span style="font-family: Menlo;">1.首先修改&lt;APIM_HOME&gt;/repository/conf/api-manager.xml</span></span></div>
<div>
<div style="padding: 0px 1em 0px 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; right: auto !important; text-align: left; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal; font-style: normal; font-variant-ligatures: normal; font-variant-position: normal; font-variant-caps: normal; font-variant-numeric: normal; font-variant-alternates: normal; font-variant-east-asian: normal; letter-spacing: normal; orphans: auto; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-image: none !important; background-color: rgb(255, 255, 255) !important; background-position: initial initial !important; background-repeat: initial initial !important;">
<div><span style="font-size: 12px;"><span style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div>
<div>
<div style="padding: 0px; border: 1px dashed rgb(187, 187, 187); overflow: auto; border-top-left-radius: 5px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 5px; font-style: normal; font-variant-ligatures: normal; font-variant-position: normal; font-variant-caps: normal; font-variant-numeric: normal; font-variant-alternates: normal; font-variant-east-asian: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">
<div style="padding: 5px 15px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(204, 204, 204); text-align: left; border-top-right-radius: 5px; border-top-left-radius: 5px; overflow: hidden; background-color: rgb(245, 245, 245); background-position: initial initial; background-repeat: initial initial;">
<div><span style="font-size: 12px;"><b>api-manager.xml中</b><span style="color: rgb(51, 51, 51);"><span style="font-family: Arial, sans-serif;"><b>CORS 配置</b></span></span></span></div>
</div>
<div style="padding: 0px; color: rgb(51, 51, 51); text-align: left; overflow: hidden; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; background-color: rgb(255, 255, 255); background-position: initial initial; background-repeat: initial initial;">
<div style=" padding: 0px;">
<div style="padding: 0px; overflow: auto !important; background-color: rgb(255, 255, 255) !important;">
<table border="0" cellpadding="0" cellspacing="0" style="color: rgb(51, 51, 51); border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; background-image: none !important; width: 583px;">
<tr style="color: rgb(51, 51, 51); border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; background-image: none !important;">
<td style="color: rgb(51, 51, 51); border: 0px dashed !important; overflow: visible !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; padding: 0px 0px 0px 15px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; background-image: none !important; background-color: rgb(255, 255, 255); width: 100%;">
<div title="Hint: double-click to select code" style="padding: 0px 0px 15px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; white-space: pre-wrap !important; background-image: none !important;">
<div style="padding: 0px 1em 0px 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: normal !important; font-style: normal !important; white-space: pre-wrap !important; background-image: none !important; background-color: rgb(255, 255, 255) !important; background-position: initial initial !important; background-repeat: initial initial !important;"><span style="font-size: 12px;"><code style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; color: rgb(0, 0, 0) !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">&lt;CORSConfiguration&gt;</code></span></div>
<div style="padding: 0px 1em 0px 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: normal !important; font-style: normal !important; white-space: pre-wrap !important; background-image: none !important; background-color: rgb(255, 255, 255) !important; background-position: initial initial !important; background-repeat: initial initial !important;">
<div><span style="font-size: 12px;"><code style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">    </code><code style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; color: rgb(0, 0, 0) !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">&lt;Enabled&gt;</code><code style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: bold !important; font-style: normal !important; color: rgb(51, 102, 153) !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">true</code><code style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; color: rgb(0, 0, 0) !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">&lt;/Enabled&gt;</code></span></div>
</div>
<div style="padding: 0px 1em 0px 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; white-space: pre-wrap !important; background-image: none !important; background-color: rgb(255, 255, 255) !important;">
<div><span style="font-size: 12px;"><code style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">    </code><code style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; color: rgb(0, 0, 0) !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">&lt;Access-Control-Allow-Origin&gt;https:</code><code style="border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; color: rgb(0, 130, 0) !important; background-image: none !important;"><span style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;">//localhost:9443,</span><a style="color: rgb(50, 108, 166); text-decoration: none; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; background-image: none !important;"><span style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;">http://localhost:9763,http://localhost:9000</span></a></code><code style="border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; color: rgb(0, 130, 0) !important; background-image: none !important;"><a style="color: rgb(50, 108, 166); text-decoration: none; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; background-image: none !important;"><span style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;">&lt;/Access-Control-Allow-Origin</span></a><span style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;">&gt;</span></code></span></div>
</div>
<div style="padding: 0px 1em 0px 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: normal !important; font-style: normal !important; white-space: pre-wrap !important; background-image: none !important; background-color: rgb(255, 255, 255) !important; background-position: initial initial !important; background-repeat: initial initial !important;"><span style="font-size: 12px;"><code style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">    </code><code style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; color: rgb(0, 0, 0) !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">&lt;Access-Control-Allow-Headers&gt;authorization,Access-Control-Allow-Origin,Content-Type&lt;/Access-Control-Allow-Headers&gt;</code></span></div>
<div style="padding: 0px 1em 0px 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: normal !important; font-style: normal !important; white-space: pre-wrap !important; background-image: none !important; background-color: rgb(255, 255, 255) !important; background-position: initial initial !important; background-repeat: initial initial !important;"><span style="font-size: 12px;"> </span></div>
<div style="padding: 0px 1em 0px 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: normal !important; font-style: normal !important; white-space: pre-wrap !important; background-image: none !important; background-color: rgb(255, 255, 255) !important; background-position: initial initial !important; background-repeat: initial initial !important;"><span style="font-size: 12px;"><code style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">    </code><code style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; color: rgb(0, 0, 0) !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">&lt;!--Configure Access-Control-Allow-Methods--&gt;</code></span></div>
<div style="padding: 0px 1em 0px 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: normal !important; font-style: normal !important; white-space: pre-wrap !important; background-image: none !important; background-color: rgb(255, 255, 255) !important; background-position: initial initial !important; background-repeat: initial initial !important;">
<div><span style="font-size: 12px;"><code style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">    </code><code style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; color: rgb(0, 0, 0) !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">&lt;Access-Control-Allow-Methods&gt;GET,POST,PUT,DELETE,OPTIONS&lt;/Access-Control-Allow-Methods&gt;</code></span></div>
</div>
<div style="padding: 0px 1em 0px 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: normal !important; font-style: normal !important; white-space: pre-wrap !important; background-image: none !important; background-color: rgb(255, 255, 255) !important; background-position: initial initial !important; background-repeat: initial initial !important;">
<div><span style="font-size: 12px;"> <code style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"> </code></span></div>
</div>
<div style="padding: 0px 1em 0px 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: normal !important; font-style: normal !important; white-space: pre-wrap !important; background-image: none !important; background-color: rgb(255, 255, 255) !important; background-position: initial initial !important; background-repeat: initial initial !important;">
<div><span style="font-size: 12px;"><code style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; color: rgb(0, 0, 0) !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;">&lt;/CORSConfiguration&gt;</code></span></div>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div><span style="font-size: 12px;"><br/></span></div>
<div><span style="font-size: 12px;">其中<code style="border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; color: rgb(0, 130, 0) !important; background-image: none !important;"><a style="color: rgb(50, 108, 166); text-decoration: none; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; background-image: none !important;"><span style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;">http://localhost:9000</span></a></code>为angular单页应用所在域名及端口，以上配置保证了<code style="border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; color: rgb(0, 130, 0) !important; background-image: none !important;"><a style="color: rgb(50, 108, 166); text-decoration: none; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; left: auto !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-weight: normal !important; font-style: normal !important; background-image: none !important;"><span style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;">http://localhost:9000</span></a></code>上的应用可以跨域请求API Manager的API网关上的API，但是token API请求还需要做第二步配置。</span></div>
<div><span style="font-size: 12px;"><br/></span></div>
<div><span style="font-size: 12px;">2.修改</span><span style="font-size: 12px;"><span style="font-family: Menlo;">&lt;APIM_HOME&gt;</span></span><span style="font-size: 12px;">/repository/deployment/server/synapse-configs/default/api/_TokenAPI_.xml</span></div>
<div><span style="font-size: 12px;">    &lt;handlers&gt;</span></div>
<div><span style="font-size: 12px;">        <span style="color: rgb(45, 150, 221);"><b>&lt;handler class="org.wso2.carbon.apimgt.gateway.handlers.security.CORSRequestHandler"&gt;</b></span></span></div>
<div><span style="color: rgb(45, 150, 221);"><b><span style="font-size: 12px;">               &lt;property name="apiImplementationType" value="INLINE"/&gt;</span></b></span></div>
<div><span style="color: rgb(45, 150, 221);"><b><span style="font-size: 12px;">        &lt;/handler&gt;</span></b></span></div>
<div><span style="font-size: 12px;">        &lt;handler class="org.wso2.carbon.apimgt.gateway.handlers.ext.APIManagerCacheExtensionHandler"/&gt;</span></div>
<div><span style="font-size: 12px;">        &lt;handler class="org.wso2.carbon.apimgt.gateway.handlers.common.SynapsePropertiesHandler"/&gt;</span></div>
<div><span style="font-size: 12px;">    &lt;/handlers&gt;</span></div>
<div><span style="font-size: 12px;"><br/></span></div>
<div><span style="font-size: 11px;"><span style="font-family: Menlo;"><br/></span></span></div>
</div>
</div>
</body></html>
